# UART Test Commands for ESP32 RC Car
# Send these commands via serial terminal at 921600 baud to GPIO 9 (TX), GPIO 10 (RX)
# Format: Each command should end with newline (\n)

# System Management Commands
M:SYS_ARM
M:SYS_DISARM
M:SYS_MODE:1
M:SYS_MODE:0

# Control Commands
C:SET_SPEED:128
C:SET_SPEED:255
C:SET_SPEED:0
C:SET_STEER:50
C:SET_STEER:105
C:SET_STEER:135
C:SET_STEER:90

# Emergency Commands
E:BRAKE_NOW
E:STOP

# Test Sequence 1: Basic Control
# 1. ARM system
M:SYS_ARM
# 2. Switch to AUTO mode
M:SYS_MODE:1
# 3. Set speed to 128
C:SET_SPEED:128
# 4. Set steering to center
C:SET_STEER:105
# 5. Wait and then brake
E:BRAKE_NOW
# 6. Disarm
M:SYS_DISARM

# Test Sequence 2: Watchdog Timeout Test
# 1. ARM and set to AUTO
M:SYS_ARM
M:SYS_MODE:1
# 2. Send commands with heartbeat
C:SET_SPEED:128
# 3. Stop sending heartbeats for >120ms to trigger watchdog timeout
# (Don't send any commands for 150ms)
# Expected: System should enter FAULT state

# Test Sequence 3: Mode Switching
# 1. Start in MANUAL mode (default)
# 2. Switch to AUTO
M:SYS_MODE:1
# 3. Switch back to MANUAL
M:SYS_MODE:0

